<!--
  Kronologisk værkoversigt
  Grundtvigs værker
  KK 2013-09-18
  Inkl. alternativ titel, KK 2014-03-06
  KSR 2014.05.06: link fra altTitle til tekst
-->
#{ extends 'main.html' /}
#{ header /}

<script type="text/javascript">
    
    $(document).ready(function() {

        $('div.root').hide();

        genre = ['samler','prosa','lyrik','polemik','rimbreve','gaader'];

        $.each(genre, function(index, value) { 
            var nodes = [];
            $('div.work').each(function(index2) {
                var rootName= $(this).find('span.rootName').text(),
                    splitName= rootName.split( "_" ),
                    year= splitName[0],
                    sj= splitName[1];
                if( year.substr(0,3)!=value ) {
                  return true;
                }
                var name = $(this).find('span.name').text(),
                    altName = $(this).find('span.altName').text(),
                    //altNameForm= altName ? '<br/>('+altName+')' : '', parenthesis
                    url= $(this).find('span.url').text(),
                    altNameForm= altName ? '<tr><td class="shortForm"><a href="' + url + '">' + altName + '</a></td><td class="definisjon">' + year + '</td><td class="sjNummer">' + sj + '</td></tr>' : '';
                    url= $(this).find('span.url').text(),
                    node = '<tr><td class="shortForm"><a href="' + url + '">' + name + '</a></td><td class="definisjon">' + year + '</td><td class="sjNummer">' + sj + '</td></tr>' +  altNameForm ;
                nodes.push(node);
            });
            //nodes = nodes.sort();
            $(nodes).each( function(index) {
                $('#' + value).after(nodes.pop());
            });
        }); 
    });
    
    
</script>



<div id="main">

	<div class="container" id="underside_innhold">

		<div id="submenu">
		<div id="breadcrumbs"><a href="#">Forside</a> &raquo; <a href="../krono#">Værker</a> &raquo;  Genre</div>

		</div>
            
            <div class="kolonne1">

		<ul id="kolonne1_meny">
                    <li class="header">Værker</li>
                    <li><a href="/krono">Kronologisk</a></li>
                    <li><a href="/alfa">Alfabetisk</a></li>
                    <li class="last"><a class="selected" href="/genre">Genre</a></li>
                </ul>
            </div>

	<div id="kolonne1_bred"><h1>Genre</h1>
            
            <div id="tidsInterval">
                <a href="../genre#salmer">Salmer</a>                
                <a href="../genre#prosa">Prosa</a>
                <a href="../genre#lyrik">Lyrik</a>
                <a href="../genre#polemik">Polemik</a>
                <a href="../genre#rimbreve">Rimbreve</a>
                <a href="../genre#gaader">Gåder</a>
            </div>

                
<!--Her bygges en kronologisk oversigt-->

  <div class="root">
    #{list play.mvc.Scope.RenderArgs.current().sortedAssets, as:'asset'}
     <div class="work">
       <span class="url">@{ShowAsset.tekstvisning(asset.id, 0)}</span>
       <span class="name">${asset.name}</span>
       <span class="rootName">${asset.rootName}</span>
       <span class="altName">${asset.getXmlElem( asset.xml, "title", "rend", "altForm" )}</span>       
     </div>
    #{/list}
  </div>

            <div id="liste" class="hideroot">
                
                <table>
                    <tr>
                        <td class="shortForm">Titel</td>
                        <td class="definisjon">År</td>
                        <td class="sjNummer">SJ</td>
                    </tr>
                    <tr class="bottom_border" id="salmer">
                        <td class="shortForm"><h4>Salmer</h4></td>
                        <td class="returnTop"><a class="returnTop" href="../genre#" title="til toppen">&#x25B2;</a></td>
                    </tr>
                    <tr class="bottom_border" id="prosa">
                        <td class="shortForm"><h4>Prosa</h4></td>
                        <td class="returnTop"><a class="returnTop" href="../genre#" title="til toppen">&#x25B2;</a></td>
                    </tr>
                    <tr class="bottom_border" id="lyrik">
                        <td class="shortForm"><h4>Lyrik</h4></td>
                        <td class="returnTop"><a class="returnTop" href="../genre#" title="til toppen">&#x25B2;</a></td>
                    </tr>
                    <tr class="bottom_border" id="polemik">
                        <td class="shortForm"><h4>Polemik</h4></td>
                        <td class="returnTop"><a class="returnTop" href="../genre#" title="til toppen">&#x25B2;</a></td>
                    </tr>
                    <tr class="bottom_border" id="rimbreve">
                        <td class="shortForm"><h4>Rimbreve</h4></td>
                        <td class="returnTop"><a class="returnTop" href="../genre#" title="til toppen">&#x25B2;</a></td>
                    </tr>
                    <tr class="bottom_border" id="gaader">
                        <td class="shortForm"><h4>Gåder</h4></td>
                        <td class="returnTop"><a class="returnTop" href="../genre#" title="til toppen">&#x25B2;</a></td>
                    </tr>
                </table>
            </div>
        </div>
        </div>
</div>

